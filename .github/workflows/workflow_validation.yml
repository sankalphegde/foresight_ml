# name: Validation Pipeline

# on:
#   push:
#     branches:
#       - "*"
#   pull_request:
#     branches:
#       - "*"

# jobs:
#   lint-and-type-check:
#     runs-on: ubuntu-latest
    
#     steps:
#     - name: Checkout code
#       uses: actions/checkout@v4
    
#     - name: Set up Python
#       uses: actions/setup-python@v5
#       with:
#         python-version: '3.11'
    
#     - name: Cache dependencies
#       uses: actions/cache@v3
#       with:
#         path: ~/.cache/pip
#         key: ${{ runner.os }}-pip-${{ hashFiles('**/requirements.txt') }}
#         restore-keys: |
#           ${{ runner.os }}-pip-
    
#     - name: Install dependencies
#       run: |
#         python -m pip install --upgrade pip
#         pip install -r requirements.txt
    
#     - name: Run Ruff linter
#       run: |
#         ruff check src/ airflow/
    
#     - name: Run Ruff formatter check
#       run: |
#         ruff format --check src/ airflow/
    
#     - name: Run mypy type checker
#       run: |
#         mypy src/

#   terraform-validate:
#     runs-on: ubuntu-latest
    
#     steps:
#     - name: Checkout code
#       uses: actions/checkout@v4
    
#     - name: Setup Terraform
#       uses: hashicorp/setup-terraform@v3
#       with:
#         terraform_version: 1.6.0
    
#     - name: Terraform format check
#       run: |
#         cd terraform
#         terraform fmt -check
    
#     - name: Terraform init
#       run: |
#         cd terraform
#         terraform init -backend=false
    
#     - name: Terraform validate
#       run: |
#         cd terraform
#         terraform validate

#   docker-build:
#     runs-on: ubuntu-latest
#     needs: [lint-and-type-check]
    
#     steps:
#     - name: Checkout code
#       uses: actions/checkout@v4
    
#     - name: Test Docker Compose build
#       run: |
#         docker-compose config
#         echo "Docker Compose configuration is valid"

# TODO: uncomment once we know the rest of the code works